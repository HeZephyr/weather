{"remainingRequest":"C:\\Users\\pursuit\\Desktop\\Documents\\移动应用开发\\smart-office-design\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\pursuit\\Desktop\\Documents\\移动应用开发\\smart-office-design\\src\\assets\\js\\sdk.js","dependencies":[{"path":"C:\\Users\\pursuit\\Desktop\\Documents\\移动应用开发\\smart-office-design\\src\\assets\\js\\sdk.js","mtime":1633384130000},{"path":"C:\\Users\\pursuit\\Desktop\\Documents\\移动应用开发\\smart-office-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\pursuit\\Desktop\\Documents\\移动应用开发\\smart-office-design\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:KGZ1bmN0aW9uICgpIHsKICBsZXQgY291bnQgPSAxOwogIGNvbnN0IEFQSV9IT1NUID0gJ2h0dHA6Ly9vcGVuLmlvdC4xMDA4Ni5jbic7CgogIGZ1bmN0aW9uIG5vb3AoKSB7fQoKICBmdW5jdGlvbiBqc29ucCh1cmwsIG9wdHMsIGZuKSB7CiAgICBpZiAodHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgZm4gPSBvcHRzOwogICAgICBvcHRzID0ge307CiAgICB9CgogICAgaWYgKCFvcHRzKSBvcHRzID0ge307CiAgICBjb25zdCBwcmVmaXggPSBvcHRzLnByZWZpeCB8fCAnY2FsbGJhY2snOyAvLyB1c2UgdGhlIGNhbGxiYWNrIG5hbWUgdGhhdCB3YXMgcGFzc2VkIGlmIG9uZSB3YXMgcHJvdmlkZWQuCiAgICAvLyBvdGhlcndpc2UgZ2VuZXJhdGUgYSB1bmlxdWUgbmFtZSBieSBpbmNyZW1lbnRpbmcgb3VyIGNvdW50ZXIuCgogICAgY29uc3QgaWQgPSBvcHRzLm5hbWUgfHwgcHJlZml4ICsgY291bnQrKzsKICAgIGNvbnN0IHBhcmFtID0gb3B0cy5wYXJhbSB8fCAnY2FsbGJhY2snOwogICAgY29uc3QgdGltZW91dCA9IG9wdHMudGltZW91dCAhPSBudWxsID8gb3B0cy50aW1lb3V0IDogNjAwMDA7CiAgICBjb25zdCBlbmMgPSBlbmNvZGVVUklDb21wb25lbnQ7CiAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF0gfHwgZG9jdW1lbnQuaGVhZDsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdAoKICAgIGxldCBzY3JpcHQ7CiAgICBsZXQgdGltZXI7CgogICAgaWYgKHRpbWVvdXQpIHsKICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBjbGVhbnVwKCk7CiAgICAgICAgaWYgKGZuKSBmbihuZXcgRXJyb3IoJ1RpbWVvdXQnKSk7CiAgICAgIH0sIHRpbWVvdXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsZWFudXAoKSB7CiAgICAgIGlmIChzY3JpcHQucGFyZW50Tm9kZSkgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTsKICAgICAgd2luZG93W2lkXSA9IG5vb3A7CiAgICAgIGlmICh0aW1lcikgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIGlmICh3aW5kb3dbaWRdKSB7CiAgICAgICAgY2xlYW51cCgpOwogICAgICB9CiAgICB9CgogICAgd2luZG93W2lkXSA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGNsZWFudXAoKTsKICAgICAgaWYgKGZuKSBmbihudWxsLCBkYXRhKTsKICAgIH07IC8vIGFkZCBxcyBjb21wb25lbnQKCgogICAgdXJsICs9ICh+dXJsLmluZGV4T2YoJz8nKSA/ICcmJyA6ICc/JykgKyBwYXJhbSArICc9JyArIGVuYyhpZCkgKyAnJl89JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgdXJsID0gdXJsLnJlcGxhY2UoJz8mJywgJz8nKTsgLy8gY3JlYXRlIHNjcmlwdAoKICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgc2NyaXB0LnNyYyA9IHVybDsKICAgIHRhcmdldC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzY3JpcHQsIHRhcmdldCk7CiAgICByZXR1cm4gY2FuY2VsOwogIH0KCiAgZnVuY3Rpb24gT25lTmV0QXBpKGFwaUtleSkgewogICAgaWYgKCFhcGlLZXkpIHsKICAgICAgYWxlcnQoJ+WIneWni+WMlk9uZU5ldEFwaeaXtuW/hemhu+S8oOWFpWFwaUtlee+8gScpOwogICAgfQoKICAgIHRoaXMuX2FwaUtleSA9IGVuY29kZVVSSUNvbXBvbmVudChhcGlLZXkpOwogIH0KCiAgT25lTmV0QXBpLnByb3RvdHlwZSA9IHsKICAgIC8qKgogICAgICog6K+75Y+W6K6+5aSH5aSa5Liq5pWw5o2u5rWBCiAgICAgKiAqLwogICAgZ2V0RGF0YVN0cmVhbXM6IGZ1bmN0aW9uIChkZXZpY2VJZCkgewogICAgICBsZXQgZG9uZUNhbGxCYWNrOwogICAgICBqc29ucChBUElfSE9TVCArICcvYXBpL2pzb25wcmVzZW5kP2tleT0nICsgdGhpcy5fYXBpS2V5ICsgJyZtZXRob2Q9R0VUJnVyaT1kZXZpY2VzLycgKyBkZXZpY2VJZCArICcvZGF0YXN0cmVhbXMnLCBmdW5jdGlvbiAoZXJyb3IsIHJlcykgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKICAgICAgICBpZiAoZXJyb3IgfHwgIXJlcy5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpKSB7CiAgICAgICAgICByZXMgPSB7CiAgICAgICAgICAgIGVycm5vOiAxMDAsCiAgICAgICAgICAgIGVycm9yOiAndGltZW91dCcKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBkb25lQ2FsbEJhY2sgJiYgZG9uZUNhbGxCYWNrKHJlcyk7CiAgICAgIH0pOwogICAgICByZXR1cm4gewogICAgICAgIGRvbmU6IGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICBkb25lQ2FsbEJhY2sgPSBmdW5jOwogICAgICAgIH0KICAgICAgfTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDojrflj5bmlbDmja7ngrkgY21kcwogICAgICogKi8KICAgIGdldERhdGFQb2ludHM6IGZ1bmN0aW9uIChkZXZpY2VJZCwgcGFyYW1ldGVyKSB7CiAgICAgIGxldCBkb25lQ2FsbEJhY2s7CiAgICAgIGxldCB1cmkgPSAnZGV2aWNlcy8nICsgZGV2aWNlSWQgKyAnL2RhdGFwb2ludHMnOwogICAgICBsZXQgdXJpQ29tcG9uZW50ID0gJyc7CgogICAgICBpZiAocGFyYW1ldGVyKSB7CiAgICAgICAgZm9yIChjb25zdCBpIGluIHBhcmFtZXRlcikgewogICAgICAgICAgaWYgKHVyaUNvbXBvbmVudCkgewogICAgICAgICAgICB1cmlDb21wb25lbnQgKz0gZW5jb2RlVVJJQ29tcG9uZW50KCcmJyk7CiAgICAgICAgICB9CgogICAgICAgICAgdXJpQ29tcG9uZW50ICs9IGkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1ldGVyW2ldKTsKICAgICAgICB9CgogICAgICAgIHVyaSArPSBlbmNvZGVVUklDb21wb25lbnQoJz8nKSArIHVyaUNvbXBvbmVudDsKICAgICAgfQoKICAgICAganNvbnAoQVBJX0hPU1QgKyAnL2FwaS9qc29ucHJlc2VuZD9rZXk9JyArIHRoaXMuX2FwaUtleSArICcmbWV0aG9kPUdFVCZ1cmk9JyArIHVyaSwgZnVuY3Rpb24gKGVycm9yLCByZXMpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCiAgICAgICAgaWYgKGVycm9yIHx8ICFyZXMuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSkgewogICAgICAgICAgcmVzID0gewogICAgICAgICAgICBlcnJubzogMTAwLAogICAgICAgICAgICBlcnJvcjogJ3RpbWVvdXQnCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZG9uZUNhbGxCYWNrICYmIGRvbmVDYWxsQmFjayhyZXMpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBkb25lOiBmdW5jdGlvbiAoZnVuYykgewogICAgICAgICAgZG9uZUNhbGxCYWNrID0gZnVuYzsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAoKICAgIC8qKgogICAgICAgICAqIOWPkemAgeWRveS7pCAvYXBpL2pzb25wcmVzZW5kP2NhbGxiYWNrPWNhbGxiYWNrMSZfPTEmdXJpPWNtZHMmbWV0aG9kPWNtZHMma2V5PXtBUElrZXl9JmRldmljZV9pZD176K6+5aSHSUR9JnNtcz176KaB5Y+R55qE5oyH5LukCiAgICAgICAgICogKi8KICAgIHNlbmRDb21tYW5kOiBmdW5jdGlvbiAoZGV2aWNlSWQsIGNvbW1hbmQpIHsKICAgICAgbGV0IGRvbmVDYWxsQmFjazsKICAgICAganNvbnAoQVBJX0hPU1QgKyAnL2FwaS9qc29ucHJlc2VuZD9rZXk9JyArIHRoaXMuX2FwaUtleSArICcmbWV0aG9kPWNtZHMmdXJpPWNtZHMmZGV2aWNlX2lkPScgKyBkZXZpY2VJZCArICcmc21zPScgKyBlbmNvZGVVUklDb21wb25lbnQoY29tbWFuZCksIGZ1bmN0aW9uIChlcnJvciwgcmVzKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucwogICAgICAgIGlmIChlcnJvciB8fCAhcmVzLmhhc093blByb3BlcnR5KCdlcnJubycpKSB7CiAgICAgICAgICByZXMgPSB7CiAgICAgICAgICAgIGVycm5vOiAxMDAsCiAgICAgICAgICAgIGVycm9yOiAndGltZW91dCcKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBkb25lQ2FsbEJhY2sgJiYgZG9uZUNhbGxCYWNrKHJlcyk7CiAgICAgIH0pOwogICAgICByZXR1cm4gewogICAgICAgIGRvbmU6IGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICBkb25lQ2FsbEJhY2sgPSBmdW5jOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9OwogIHdpbmRvdy5PbmVOZXRBcGkgPSBPbmVOZXRBcGk7Cn0pKCk7"},{"version":3,"sources":["C:/Users/pursuit/Desktop/Documents/移动应用开发/smart-office-design/src/assets/js/sdk.js"],"names":["count","API_HOST","noop","jsonp","url","opts","fn","prefix","id","name","param","timeout","enc","encodeURIComponent","target","document","getElementsByTagName","head","script","timer","setTimeout","cleanup","Error","parentNode","removeChild","window","clearTimeout","cancel","data","indexOf","Date","getTime","replace","createElement","src","insertBefore","OneNetApi","apiKey","alert","_apiKey","prototype","getDataStreams","deviceId","doneCallBack","error","res","hasOwnProperty","errno","done","func","getDataPoints","parameter","uri","uriComponent","i","sendCommand","command"],"mappings":"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","sourcesContent":["(function() {\n  let count = 1;\n  const API_HOST = 'http://open.iot.10086.cn';\n\n  function noop() {}\n\n  function jsonp(url, opts, fn) {\n    if (typeof opts === 'function') {\n      fn = opts;\n      opts = {};\n    }\n    if (!opts) opts = {};\n\n    const prefix = opts.prefix || 'callback';\n\n    // use the callback name that was passed if one was provided.\n    // otherwise generate a unique name by incrementing our counter.\n    const id = opts.name || prefix + count++;\n\n    const param = opts.param || 'callback';\n    const timeout = opts.timeout != null ? opts.timeout : 60000;\n    const enc = encodeURIComponent;\n    const target = document.getElementsByTagName('script')[0] || document.head;\n    // eslint-disable-next-line prefer-const\n    let script;\n    let timer;\n\n    if (timeout) {\n      timer = setTimeout(function() {\n        cleanup();\n        if (fn) fn(new Error('Timeout'));\n      }, timeout);\n    }\n\n    function cleanup() {\n      if (script.parentNode) script.parentNode.removeChild(script);\n      window[id] = noop;\n      if (timer) clearTimeout(timer);\n    }\n\n    function cancel() {\n      if (window[id]) {\n        cleanup();\n      }\n    }\n\n    window[id] = function(data) {\n      cleanup();\n      if (fn) fn(null, data);\n    };\n\n    // add qs component\n    url +=\n      (~url.indexOf('?') ? '&' : '?') +\n      param +\n      '=' +\n      enc(id) +\n      '&_=' +\n      new Date().getTime();\n    url = url.replace('?&', '?');\n\n    // create script\n    script = document.createElement('script');\n    script.src = url;\n    target.parentNode.insertBefore(script, target);\n\n    return cancel;\n  }\n\n  function OneNetApi(apiKey) {\n    if (!apiKey) {\n      alert('初始化OneNetApi时必须传入apiKey！');\n    }\n    this._apiKey = encodeURIComponent(apiKey);\n  }\n\n  OneNetApi.prototype = {\n    /**\n     * 读取设备多个数据流\n     * */\n    getDataStreams: function(deviceId) {\n      let doneCallBack;\n      jsonp(\n        API_HOST +\n          '/api/jsonpresend?key=' +\n          this._apiKey +\n          '&method=GET&uri=devices/' +\n          deviceId +\n          '/datastreams',\n        function(error, res) {\n          // eslint-disable-next-line no-prototype-builtins\n          if (error || !res.hasOwnProperty('data')) {\n            res = {\n              errno: 100,\n              error: 'timeout'\n            };\n          }\n\n          doneCallBack && doneCallBack(res);\n        }\n      );\n      return {\n        done: function(func) {\n          doneCallBack = func;\n        }\n      };\n    },\n    /**\n     * 获取数据点 cmds\n     * */\n    getDataPoints: function(deviceId, parameter) {\n      let doneCallBack;\n      let uri = 'devices/' + deviceId + '/datapoints';\n      let uriComponent = '';\n      if (parameter) {\n        for (const i in parameter) {\n          if (uriComponent) {\n            uriComponent += encodeURIComponent('&');\n          }\n          uriComponent += i + '=' + encodeURIComponent(parameter[i]);\n        }\n        uri += encodeURIComponent('?') + uriComponent;\n      }\n      jsonp(\n        API_HOST +\n          '/api/jsonpresend?key=' +\n          this._apiKey +\n          '&method=GET&uri=' +\n          uri,\n        function(error, res) {\n          // eslint-disable-next-line no-prototype-builtins\n          if (error || !res.hasOwnProperty('data')) {\n            res = {\n              errno: 100,\n              error: 'timeout'\n            };\n          }\n\n          doneCallBack && doneCallBack(res);\n        });\n      return {\n        done: function(func) {\n          doneCallBack = func;\n        }\n      };\n    },\n    /**\n         * 发送命令 /api/jsonpresend?callback=callback1&_=1&uri=cmds&method=cmds&key={APIkey}&device_id={设备ID}&sms={要发的指令\n         * */\n    sendCommand: function(deviceId, command) {\n      let doneCallBack;\n      jsonp(API_HOST + '/api/jsonpresend?key=' + this._apiKey + '&method=cmds&uri=cmds&device_id=' + deviceId + '&sms=' + encodeURIComponent(command), function(error, res) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (error || !res.hasOwnProperty('errno')) {\n          res = {\n            errno: 100,\n            error: 'timeout'\n          };\n        }\n\n        doneCallBack && doneCallBack(res);\n      });\n      return {\n        done: function(func) {\n          doneCallBack = func;\n        }\n      };\n    }\n  };\n\n  window.OneNetApi = OneNetApi;\n})();\n"]}]}