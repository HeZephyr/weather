{"remainingRequest":"C:\\Users\\pursuit\\Desktop\\Documents\\移动应用开发\\smart-office-design\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\pursuit\\Desktop\\Documents\\移动应用开发\\smart-office-design\\src\\assets\\js\\sdk.js","dependencies":[{"path":"C:\\Users\\pursuit\\Desktop\\Documents\\移动应用开发\\smart-office-design\\src\\assets\\js\\sdk.js","mtime":1633384130000},{"path":"C:\\Users\\pursuit\\Desktop\\Documents\\移动应用开发\\smart-office-design\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\pursuit\\Desktop\\Documents\\移动应用开发\\smart-office-design\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiKTsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGNvdW50ID0gMTsKICB2YXIgQVBJX0hPU1QgPSAnaHR0cDovL29wZW4uaW90LjEwMDg2LmNuJzsKCiAgZnVuY3Rpb24gbm9vcCgpIHt9CgogIGZ1bmN0aW9uIGpzb25wKHVybCwgb3B0cywgZm4pIHsKICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBmbiA9IG9wdHM7CiAgICAgIG9wdHMgPSB7fTsKICAgIH0KCiAgICBpZiAoIW9wdHMpIG9wdHMgPSB7fTsKICAgIHZhciBwcmVmaXggPSBvcHRzLnByZWZpeCB8fCAnY2FsbGJhY2snOyAvLyB1c2UgdGhlIGNhbGxiYWNrIG5hbWUgdGhhdCB3YXMgcGFzc2VkIGlmIG9uZSB3YXMgcHJvdmlkZWQuCiAgICAvLyBvdGhlcndpc2UgZ2VuZXJhdGUgYSB1bmlxdWUgbmFtZSBieSBpbmNyZW1lbnRpbmcgb3VyIGNvdW50ZXIuCgogICAgdmFyIGlkID0gb3B0cy5uYW1lIHx8IHByZWZpeCArIGNvdW50Kys7CiAgICB2YXIgcGFyYW0gPSBvcHRzLnBhcmFtIHx8ICdjYWxsYmFjayc7CiAgICB2YXIgdGltZW91dCA9IG9wdHMudGltZW91dCAhPSBudWxsID8gb3B0cy50aW1lb3V0IDogNjAwMDA7CiAgICB2YXIgZW5jID0gZW5jb2RlVVJJQ29tcG9uZW50OwogICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXSB8fCBkb2N1bWVudC5oZWFkOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0CgogICAgdmFyIHNjcmlwdDsKICAgIHZhciB0aW1lcjsKCiAgICBpZiAodGltZW91dCkgewogICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGNsZWFudXAoKTsKICAgICAgICBpZiAoZm4pIGZuKG5ldyBFcnJvcignVGltZW91dCcpKTsKICAgICAgfSwgdGltZW91dCk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgICAgaWYgKHNjcmlwdC5wYXJlbnROb2RlKSBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpOwogICAgICB3aW5kb3dbaWRdID0gbm9vcDsKICAgICAgaWYgKHRpbWVyKSBjbGVhclRpbWVvdXQodGltZXIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgaWYgKHdpbmRvd1tpZF0pIHsKICAgICAgICBjbGVhbnVwKCk7CiAgICAgIH0KICAgIH0KCiAgICB3aW5kb3dbaWRdID0gZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgY2xlYW51cCgpOwogICAgICBpZiAoZm4pIGZuKG51bGwsIGRhdGEpOwogICAgfTsgLy8gYWRkIHFzIGNvbXBvbmVudAoKCiAgICB1cmwgKz0gKH51cmwuaW5kZXhPZignPycpID8gJyYnIDogJz8nKSArIHBhcmFtICsgJz0nICsgZW5jKGlkKSArICcmXz0nICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB1cmwgPSB1cmwucmVwbGFjZSgnPyYnLCAnPycpOyAvLyBjcmVhdGUgc2NyaXB0CgogICAgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICBzY3JpcHQuc3JjID0gdXJsOwogICAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgdGFyZ2V0KTsKICAgIHJldHVybiBjYW5jZWw7CiAgfQoKICBmdW5jdGlvbiBPbmVOZXRBcGkoYXBpS2V5KSB7CiAgICBpZiAoIWFwaUtleSkgewogICAgICBhbGVydCgn5Yid5aeL5YyWT25lTmV0QXBp5pe25b+F6aG75Lyg5YWlYXBpS2V577yBJyk7CiAgICB9CgogICAgdGhpcy5fYXBpS2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGFwaUtleSk7CiAgfQoKICBPbmVOZXRBcGkucHJvdG90eXBlID0gewogICAgLyoqCiAgICAgKiDor7vlj5borr7lpIflpJrkuKrmlbDmja7mtYEKICAgICAqICovCiAgICBnZXREYXRhU3RyZWFtczogZnVuY3Rpb24gZ2V0RGF0YVN0cmVhbXMoZGV2aWNlSWQpIHsKICAgICAgdmFyIGRvbmVDYWxsQmFjazsKICAgICAganNvbnAoQVBJX0hPU1QgKyAnL2FwaS9qc29ucHJlc2VuZD9rZXk9JyArIHRoaXMuX2FwaUtleSArICcmbWV0aG9kPUdFVCZ1cmk9ZGV2aWNlcy8nICsgZGV2aWNlSWQgKyAnL2RhdGFzdHJlYW1zJywgZnVuY3Rpb24gKGVycm9yLCByZXMpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCiAgICAgICAgaWYgKGVycm9yIHx8ICFyZXMuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSkgewogICAgICAgICAgcmVzID0gewogICAgICAgICAgICBlcnJubzogMTAwLAogICAgICAgICAgICBlcnJvcjogJ3RpbWVvdXQnCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZG9uZUNhbGxCYWNrICYmIGRvbmVDYWxsQmFjayhyZXMpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBkb25lOiBmdW5jdGlvbiBkb25lKGZ1bmMpIHsKICAgICAgICAgIGRvbmVDYWxsQmFjayA9IGZ1bmM7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKCiAgICAvKioKICAgICAqIOiOt+WPluaVsOaNrueCuSBjbWRzCiAgICAgKiAqLwogICAgZ2V0RGF0YVBvaW50czogZnVuY3Rpb24gZ2V0RGF0YVBvaW50cyhkZXZpY2VJZCwgcGFyYW1ldGVyKSB7CiAgICAgIHZhciBkb25lQ2FsbEJhY2s7CiAgICAgIHZhciB1cmkgPSAnZGV2aWNlcy8nICsgZGV2aWNlSWQgKyAnL2RhdGFwb2ludHMnOwogICAgICB2YXIgdXJpQ29tcG9uZW50ID0gJyc7CgogICAgICBpZiAocGFyYW1ldGVyKSB7CiAgICAgICAgZm9yICh2YXIgaSBpbiBwYXJhbWV0ZXIpIHsKICAgICAgICAgIGlmICh1cmlDb21wb25lbnQpIHsKICAgICAgICAgICAgdXJpQ29tcG9uZW50ICs9IGVuY29kZVVSSUNvbXBvbmVudCgnJicpOwogICAgICAgICAgfQoKICAgICAgICAgIHVyaUNvbXBvbmVudCArPSBpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtZXRlcltpXSk7CiAgICAgICAgfQoKICAgICAgICB1cmkgKz0gZW5jb2RlVVJJQ29tcG9uZW50KCc/JykgKyB1cmlDb21wb25lbnQ7CiAgICAgIH0KCiAgICAgIGpzb25wKEFQSV9IT1NUICsgJy9hcGkvanNvbnByZXNlbmQ/a2V5PScgKyB0aGlzLl9hcGlLZXkgKyAnJm1ldGhvZD1HRVQmdXJpPScgKyB1cmksIGZ1bmN0aW9uIChlcnJvciwgcmVzKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucwogICAgICAgIGlmIChlcnJvciB8fCAhcmVzLmhhc093blByb3BlcnR5KCdkYXRhJykpIHsKICAgICAgICAgIHJlcyA9IHsKICAgICAgICAgICAgZXJybm86IDEwMCwKICAgICAgICAgICAgZXJyb3I6ICd0aW1lb3V0JwogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGRvbmVDYWxsQmFjayAmJiBkb25lQ2FsbEJhY2socmVzKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9uZTogZnVuY3Rpb24gZG9uZShmdW5jKSB7CiAgICAgICAgICBkb25lQ2FsbEJhY2sgPSBmdW5jOwogICAgICAgIH0KICAgICAgfTsKICAgIH0sCgogICAgLyoqCiAgICAgICAgICog5Y+R6YCB5ZG95LukIC9hcGkvanNvbnByZXNlbmQ/Y2FsbGJhY2s9Y2FsbGJhY2sxJl89MSZ1cmk9Y21kcyZtZXRob2Q9Y21kcyZrZXk9e0FQSWtleX0mZGV2aWNlX2lkPXvorr7lpIdJRH0mc21zPXvopoHlj5HnmoTmjIfku6QKICAgICAgICAgKiAqLwogICAgc2VuZENvbW1hbmQ6IGZ1bmN0aW9uIHNlbmRDb21tYW5kKGRldmljZUlkLCBjb21tYW5kKSB7CiAgICAgIHZhciBkb25lQ2FsbEJhY2s7CiAgICAgIGpzb25wKEFQSV9IT1NUICsgJy9hcGkvanNvbnByZXNlbmQ/a2V5PScgKyB0aGlzLl9hcGlLZXkgKyAnJm1ldGhvZD1jbWRzJnVyaT1jbWRzJmRldmljZV9pZD0nICsgZGV2aWNlSWQgKyAnJnNtcz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGNvbW1hbmQpLCBmdW5jdGlvbiAoZXJyb3IsIHJlcykgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKICAgICAgICBpZiAoZXJyb3IgfHwgIXJlcy5oYXNPd25Qcm9wZXJ0eSgnZXJybm8nKSkgewogICAgICAgICAgcmVzID0gewogICAgICAgICAgICBlcnJubzogMTAwLAogICAgICAgICAgICBlcnJvcjogJ3RpbWVvdXQnCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZG9uZUNhbGxCYWNrICYmIGRvbmVDYWxsQmFjayhyZXMpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBkb25lOiBmdW5jdGlvbiBkb25lKGZ1bmMpIHsKICAgICAgICAgIGRvbmVDYWxsQmFjayA9IGZ1bmM7CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH07CiAgd2luZG93Lk9uZU5ldEFwaSA9IE9uZU5ldEFwaTsKfSkoKTs="},{"version":3,"sources":["C:/Users/pursuit/Desktop/Documents/移动应用开发/smart-office-design/src/assets/js/sdk.js"],"names":["count","API_HOST","noop","jsonp","url","opts","fn","prefix","id","name","param","timeout","enc","encodeURIComponent","target","document","getElementsByTagName","head","script","timer","setTimeout","cleanup","Error","parentNode","removeChild","window","clearTimeout","cancel","data","indexOf","Date","getTime","replace","createElement","src","insertBefore","OneNetApi","apiKey","alert","_apiKey","prototype","getDataStreams","deviceId","doneCallBack","error","res","hasOwnProperty","errno","done","func","getDataPoints","parameter","uri","uriComponent","i","sendCommand","command"],"mappings":"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","sourcesContent":["(function() {\n  let count = 1;\n  const API_HOST = 'http://open.iot.10086.cn';\n\n  function noop() {}\n\n  function jsonp(url, opts, fn) {\n    if (typeof opts === 'function') {\n      fn = opts;\n      opts = {};\n    }\n    if (!opts) opts = {};\n\n    const prefix = opts.prefix || 'callback';\n\n    // use the callback name that was passed if one was provided.\n    // otherwise generate a unique name by incrementing our counter.\n    const id = opts.name || prefix + count++;\n\n    const param = opts.param || 'callback';\n    const timeout = opts.timeout != null ? opts.timeout : 60000;\n    const enc = encodeURIComponent;\n    const target = document.getElementsByTagName('script')[0] || document.head;\n    // eslint-disable-next-line prefer-const\n    let script;\n    let timer;\n\n    if (timeout) {\n      timer = setTimeout(function() {\n        cleanup();\n        if (fn) fn(new Error('Timeout'));\n      }, timeout);\n    }\n\n    function cleanup() {\n      if (script.parentNode) script.parentNode.removeChild(script);\n      window[id] = noop;\n      if (timer) clearTimeout(timer);\n    }\n\n    function cancel() {\n      if (window[id]) {\n        cleanup();\n      }\n    }\n\n    window[id] = function(data) {\n      cleanup();\n      if (fn) fn(null, data);\n    };\n\n    // add qs component\n    url +=\n      (~url.indexOf('?') ? '&' : '?') +\n      param +\n      '=' +\n      enc(id) +\n      '&_=' +\n      new Date().getTime();\n    url = url.replace('?&', '?');\n\n    // create script\n    script = document.createElement('script');\n    script.src = url;\n    target.parentNode.insertBefore(script, target);\n\n    return cancel;\n  }\n\n  function OneNetApi(apiKey) {\n    if (!apiKey) {\n      alert('初始化OneNetApi时必须传入apiKey！');\n    }\n    this._apiKey = encodeURIComponent(apiKey);\n  }\n\n  OneNetApi.prototype = {\n    /**\n     * 读取设备多个数据流\n     * */\n    getDataStreams: function(deviceId) {\n      let doneCallBack;\n      jsonp(\n        API_HOST +\n          '/api/jsonpresend?key=' +\n          this._apiKey +\n          '&method=GET&uri=devices/' +\n          deviceId +\n          '/datastreams',\n        function(error, res) {\n          // eslint-disable-next-line no-prototype-builtins\n          if (error || !res.hasOwnProperty('data')) {\n            res = {\n              errno: 100,\n              error: 'timeout'\n            };\n          }\n\n          doneCallBack && doneCallBack(res);\n        }\n      );\n      return {\n        done: function(func) {\n          doneCallBack = func;\n        }\n      };\n    },\n    /**\n     * 获取数据点 cmds\n     * */\n    getDataPoints: function(deviceId, parameter) {\n      let doneCallBack;\n      let uri = 'devices/' + deviceId + '/datapoints';\n      let uriComponent = '';\n      if (parameter) {\n        for (const i in parameter) {\n          if (uriComponent) {\n            uriComponent += encodeURIComponent('&');\n          }\n          uriComponent += i + '=' + encodeURIComponent(parameter[i]);\n        }\n        uri += encodeURIComponent('?') + uriComponent;\n      }\n      jsonp(\n        API_HOST +\n          '/api/jsonpresend?key=' +\n          this._apiKey +\n          '&method=GET&uri=' +\n          uri,\n        function(error, res) {\n          // eslint-disable-next-line no-prototype-builtins\n          if (error || !res.hasOwnProperty('data')) {\n            res = {\n              errno: 100,\n              error: 'timeout'\n            };\n          }\n\n          doneCallBack && doneCallBack(res);\n        });\n      return {\n        done: function(func) {\n          doneCallBack = func;\n        }\n      };\n    },\n    /**\n         * 发送命令 /api/jsonpresend?callback=callback1&_=1&uri=cmds&method=cmds&key={APIkey}&device_id={设备ID}&sms={要发的指令\n         * */\n    sendCommand: function(deviceId, command) {\n      let doneCallBack;\n      jsonp(API_HOST + '/api/jsonpresend?key=' + this._apiKey + '&method=cmds&uri=cmds&device_id=' + deviceId + '&sms=' + encodeURIComponent(command), function(error, res) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (error || !res.hasOwnProperty('errno')) {\n          res = {\n            errno: 100,\n            error: 'timeout'\n          };\n        }\n\n        doneCallBack && doneCallBack(res);\n      });\n      return {\n        done: function(func) {\n          doneCallBack = func;\n        }\n      };\n    }\n  };\n\n  window.OneNetApi = OneNetApi;\n})();\n"]}]}